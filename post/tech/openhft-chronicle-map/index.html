<!doctype html><html lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="IE=edge"><title>OpenHFT/Chronicle-Map</title><meta name=description content><meta name=generator content="Hugo 0.49"><meta property=og:title content=OpenHFT/Chronicle-Map><meta property=og:description content="Replicate your Key Value Store across your network, with consistency, persistance and performance.
  &#8212; OpenHFT Chronicle-Map
github.com/OpenHFT/Chronicle-Map   Features   Ultra low latency: Chronicle Map targets median latency of both read and write queries of less than 1 microsecond in certain tests.
  High concurrency: Write queries scale well up to the number of hardware execution threads in the server. Read queries never block each other."><meta property=og:type content=article><meta property=og:url content=https://yimin.io/post/tech/openhft-chronicle-map/><meta property=article:published_time content=2018-10-11T15:02:59&#43;08:00><meta property=article:modified_time content=2018-10-12T19:53:01&#43;08:00><link rel=dns-prefetch href=//fonts.googleapis.com><link rel=dns-prefetch href=//fonts.gstatic.com><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Open+Sans:400,400i,700"><link rel=stylesheet href=/assets/css/style.css><script type=text/javascript src=/js/scripts.js></script><link rel="shortcut icon" href=/favicon.ico></head><body class=body><div class="container container--outer"><header class=header><nav class=menu><ul class=menu__list><li class=menu__item><a class=menu__link href=/>Home</a></li><li class=menu__item><a class=menu__link href=/me/>Mee</a></li><li class=menu__item><a class=menu__link href=/post/>Posts</a></li><li class=menu__item><a class=menu__link href=/wikipedia/>Wikipedia</a></li></ul></nav></header><div class="wrapper flex"><section class=primary><main class=main role=main><article class=post><header class=post__header><h1 class=post__title>OpenHFT/Chronicle-Map</h1><div class="post__meta meta"><div class="meta__item-datetime meta__item"><svg class="meta__icon icon icon-time" width="16" height="14" viewBox="0 0 16 16"><path d="m8-3e-7c-4.4.0-8 3.6-8 8C0 12.4 3.6 16 8 16c4.4.0 8-3.6 8-8.0000003.0-4.4-3.6-8-8-8zM8 14.4c-3.52.0-6.4-2.88-6.4-6.4000003.0-3.52 2.88-6.4 6.4-6.4 3.52.0 6.4 2.88 6.4 6.4C14.4 11.52 11.52 14.4 8 14.4zm.4-10.4000003H7.2v4.8l4.16 2.5600003.64-1.04-3.6-2.1600003z"/></svg><time class=meta__text datetime=2018-10-11T15:02:59>October 11, 2018</time>
<time class=meta__text datetime=2018-10-12T19:53:01>(Last Modified: October 12, 2018)</time></div><div class="meta__item-categories meta__item"><svg class="meta__icon icon icon-category" width="16" height="16" viewBox="0 0 16 16"><path d="m7 2 1 2h8v11H0V2z"/></svg><span class=meta__text><a class=meta__link href=/categories/tech rel=category>tech</a></span></div></div></header><div class="content post__content clearfix"><div class=quoteblock><blockquote><div class=paragraph><p>Replicate your Key Value Store across your network, with consistency, persistance and performance.</p></div></blockquote><div class=attribution>&#8212; OpenHFT Chronicle-Map<br><cite>github.com/OpenHFT/Chronicle-Map</cite></div></div><div class=sect1><h2 id=_features><a href=https://github.com/OpenHFT/Chronicle-Map/blob/master/docs/CM_Features.adoc>Features</a></h2><div class=sectionbody><div class=ulist><ul><li><p><strong>Ultra low latency</strong>: Chronicle Map targets <code>median latency</code> of both read and write queries of <code>less than 1 microsecond</code> in certain tests.</p></li><li><p><strong>High concurrency</strong>: <code>Write queries scale well up</code> to the number of hardware execution threads in the server. <code>Read queries never block</code> each other.</p></li><li><p><strong>Persistence to disk</strong> - (Optional)</p></li><li><p><strong>Multi-master replication</strong> - (Optional, <code class=red>commercial</code> functionality) - <code>Eventually-consistent</code>, <code>fully-redundant</code>, asynchronous replication across servers, <code>"last write wins"</code> strategy by default, allows to implement custom <a href=https://en.wikipedia.org/wiki/Conflict-free_replicated_data_type>state-based <strong>CRDT(conflict-free replicated data type)</strong></a> strategy.The writer can optionally wait for replication to occur across nodes or regions.</p></li></ul></div><table class="tableblock frame-all grid-all stretch"><col style=width:50%><col style=width:50%><thead><tr><th class="tableblock halign-left valign-top">Feature</th><th class="tableblock halign-left valign-top">Availability</th></tr></thead><tbody><tr><td class="tableblock halign-left valign-top"><p class=tableblock>In-memory off-heap Map</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Open source</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Persistence to disk</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Open source</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Remote calls</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Commercially available</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Eventually-consistent replication (100% redundancy</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Commercially available</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Synchronous replication</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>Commercially available</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Partially-redundant replication</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>On demand</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class=tableblock>Entry expiration timeouts</p></td><td class="tableblock halign-left valign-top"><p class=tableblock>On demand</p></td></tr></tbody></table></div></div><div class=sect1><h2 id=_what_guarantees_does_chronicle_map_provide_in_acid_terms>What guarantees does Chronicle Map provide in ACID terms?</h2><div class=sectionbody><div class=ulist><ul><li><p><strong>Atomicity</strong> - single-key queries are atomic if Chronicle Map is properly configured, multi-key queries are not atomic.</p></li><li><p><strong>Consistency</strong> - doesn’t make sense for key-value stores</p></li><li><p><strong>Isolation</strong> - <code class=red>yes</code>; for both single- and multi-key queries.</p></li><li><p><strong>Durability</strong> - <code class=red>no</code>; Chronicle Map can be persisted to disk, but with no guarantee as to how frequently this happens. This is under the control of the OS. All data is guaranteed to be written to disk when the Map is closed.</p></li><li><p><strong>Clustering</strong> and <strong>replication</strong> for Chronicle Map is provided by <a href=https://github.com/ChronicleEnterprise/Chronicle-Map-Enterprise>Chronicle Map Enterprise</a>.</p></li></ul></div></div></div><div class=sect1><h2 id=_what_is_the_data_structure_of_chronicle_map>What is the data structure of Chronicle Map?</h2><div class=sectionbody><div class=paragraph><p>Simply put, a Chronicle Map data store is a big chunk of shared memory (optionally mapped to disk).<br>It is split into independent segments; each segment has:</p></div><div class=ulist><ul><li><p>an independent memory allocation for storing the entries</p></li><li><p>a hash table for search</p></li><li><p>a lock in shared memory (implemented via CAS loops) for managing concurrent access.</p></li></ul></div><div class=paragraph><p>See <a href=https://github.com/OpenHFT/Chronicle-Map/blob/master/spec>Chronicle Map data store design overview</a> for more information.</p></div></div></div><div class=sect1><h2 id=_chronicle_map_does_not_support>Chronicle Map does not support:</h2><div class=sectionbody><div class=ulist><ul><li><p>range queries.</p></li><li><p>iteration over the entries in alphabetical order.</p></li><li><p>sorting of keys.</p></li><li><p>LRU entry eviction.</p></li></ul></div></div></div><div class=sect1><h2 id=_unique_features>Unique features[?]</h2><div class=sectionbody><div class=ulist><ul><li><p>Multiple processes can access a Chronicle Map concurrently. At the same time, the data store is in-process for each of the accessing processes. Out-of-process approach to IPC is simply incompatible with Chronicle Map’s median latency target of &lt; 1 μs.</p></li><li><p>Replication <strong>without logs</strong>, with constant footprint cost, guarantees progress even if the network doesn’t sustain write rates.</p></li></ul></div></div></div><div class=sect1><h2 id=_other_key_points>Other key points</h2><div class=sectionbody><div class=ulist><ul><li><p><strong>size not limited by memory</strong> The size of a Chronicle Map is not limited by memory (RAM), but rather by the available disk capacity.</p></li><li><p><strong>Eventually-consistent replication (100% redundancy)</strong> Commercially available</p></li><li><p><strong>Clustering and replication</strong> Commercially available</p></li></ul></div></div></div><div class=sect1><h2 id=_overview>Overview</h2><div class=sectionbody><div class=imageblock><div class=content><img src=https://github.com/OpenHFT/Chronicle-Map/raw/master/docs/images/CM_Overview.jpg alt="CM Overview"></div></div></div></div><div class=sect1><h2 id=_conclusion>Conclusion</h2><div class=sectionbody><div class=ulist><ul><li><p>Do not use it in your production application.</p></li><li><p>If you have more time, you can clone and read the <a href=https://github.com/OpenHFT/Chronicle-Map>source code</a> or take exercise.</p></li></ul></div></div></div></div><div class="post__tags tags clearfix"><svg class="icon icon-tag" width="16" height="16" viewBox="0 0 16 16"><path d="M16 9.5c0 .373-.24.74-.5 1l-5 5c-.275.26-.634.5-1 .5-.373.0-.74-.24-1-.5L1 8a2.853 2.853.0 0 1-.7-1C.113 6.55.0 5.973.0 5.6V1.4C0 1.034.134.669.401.401.67.134 1.034.0 1.4.0h4.2c.373.0.95.113 1.4.3.45.187.732.432 1 .7l7.5 7.502c.26.274.5.632.5.998zM3.5 5a1.5 1.5.0 1 0 0-3 1.5 1.5.0 0 0 0 3z"/></svg><ul class=tags__list><li class=tags__item><a class="tags__link btn" href=/tags/tech/ rel=tag>tech</a></li><li class=tags__item><a class="tags__link btn" href=/tags/java/ rel=tag>java</a></li></ul></div></article></main><div class="authorbox clearfix"><figure class=authorbox__avatar><img alt="yimin avatar" src=/favicon.ico class=avatar height=90 width=90></figure><div class=authorbox__header><span class=authorbox__name>About yimin</span></div><div class=authorbox__description>Ordinary steps can also take a great trip.</div></div><nav class="post-nav flex"><div class="post-nav__item post-nav__item--prev"><a class=post-nav__link href=/post/schindlers-list/ rel=prev><span class=post-nav__caption>«&thinsp;Previous</span><p class=post-nav__post-title>Oskar Schindler[奥斯卡·辛德勒]</p></a></div><div class="post-nav__item post-nav__item--next"><a class=post-nav__link href=/post/tech/openhft-chronicle-map-replication/ rel=next><span class=post-nav__caption>Next&thinsp;»</span><p class=post-nav__post-title>OpenHFT/Chronicle-Map Replication</p></a></div></nav></section></div><footer class=footer><div class=container><div class=footer__copyright>&copy; 2018 &amp;copy;2018 Yimin. <span class=footer__copyright-credits>Generated with <a href=https://gohugo.io/ rel="nofollow noopener" target=_blank>Hugo</a> and <a href=https://github.com/gardenias/ rel="nofollow noopener" target=_blank>Gardenias</a> theme.</span></div></div></footer></div><script>var navigation=responsiveNav(".menu",{navClass:"menu--collapse",label:"Menu",});</script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML" async></script></body></html>